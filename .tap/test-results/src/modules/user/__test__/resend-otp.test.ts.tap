Initializing Redis Client...
TAP version 14
connected to redis
# Subtest: ✅ Should resend OTP successfully
    ok 1 - should be equal
    ok 2 - should be equivalent
    1..2
ok 1 - ✅ Should resend OTP successfully # time=2320.153ms

Query: delete from "user_otp_verifications" where "user_otp_verifications"."user_id" = $1 -- params: [3300356300761297]
# Subtest: ❌ Should return 404 if user not found
    not ok 1 - should be equal
      ---
      compare: ===
      at:
        fileName: src\modules\user\__test__\resend-otp.test.ts
        lineNumber: 100
        columnNumber: 7
        isToplevel: true
        generated:
          fileName: src/modules/user/__test__/resend-otp.test.ts
          lineNumber: 118
          columnNumber: 7
      stack: |
        src/modules/user/__test__/resend-otp.test.ts:100:7
        Generator.next
        fulfilled (src/modules/user/__test__/resend-otp.test.ts:38:58)
      diff: |
        --- expected
        +++ actual
        @@ -1,1 +1,1 @@
        -404
        +500
      ...
    
    not ok 2 - should be equivalent
      ---
      diff: |
        --- expected
        +++ actual
        @@ -1,3 +1,6 @@
         Object {
        -  "message": "No user found with this id",
        +  "statusCode": 500,
        +  "code": "ENOTFOUND",
        +  "error": "Internal Server Error",
        +  "message": "getaddrinfo ENOTFOUND test-postgres",
         }
      at:
        fileName: src\modules\user\__test__\resend-otp.test.ts
        lineNumber: 101
        columnNumber: 7
        isToplevel: true
        generated:
          fileName: src/modules/user/__test__/resend-otp.test.ts
          lineNumber: 119
          columnNumber: 7
      stack: |
        src/modules/user/__test__/resend-otp.test.ts:101:7
        Generator.next
        fulfilled (src/modules/user/__test__/resend-otp.test.ts:38:58)
      ...
    
    1..2
not ok 2 - ❌ Should return 404 if user not found # time=3789.175ms
  ---
  at:
    fileName: src\modules\user\__test__\resend-otp.test.ts
    lineNumber: 84
    columnNumber: 16
    typeName: Object
    generated:
      fileName: src/modules/user/__test__/resend-otp.test.ts
      lineNumber: 102
      columnNumber: 16
  ...

not ok 3 - Connection is closed.
  ---
  stack: |
    EventEmitter.sendCommand (node_modules/ioredis/built/Redis.js:332:28)
    EventEmitter.quit (node_modules/ioredis/built/utils/Commander.js:90:25)
    Object.close (node_modules/@fastify/redis/index.js:126:24)
    Object._encapsulateTwoParam (node_modules/avvio/boot.js:558:13)
    Boot.closeWithCbOrNextTick (node_modules/avvio/boot.js:531:7)
    Task.release (node_modules/fastq/queue.js:171:16)
    worked (node_modules/fastq/queue.js:223:10)
    node_modules/fastify/fastify.js:479:15
  at:
    fileName: node_modules\ioredis\built\Redis.js
    lineNumber: 332
    columnNumber: 28
    typeName: EventEmitter
    methodName: sendCommand
    functionName: EventEmitter.sendCommand
  tapCaught: unhandledRejection
  test: TAP
  source: |2
            }
            if (this.status === "end") {
                command.reject(new Error(utils_1.CONNECTION_CLOSED_ERROR_MSG));
    ---------------------------^
                return command.promise;
            }
  ...

1..3
