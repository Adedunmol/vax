Initializing Redis Client...
TAP version 14
connected to redis
# Subtest: ✅ Should register a user successfully
    not ok 1 - should be equal
      ---
      compare: ===
      at:
        fileName: src\modules\user\__test__\register.test.ts
        lineNumber: 88
        columnNumber: 7
        isToplevel: true
        generated:
          fileName: src/modules/user/__test__/register.test.ts
          lineNumber: 106
          columnNumber: 7
      stack: |
        src/modules/user/__test__/register.test.ts:88:7
        Generator.next
        fulfilled (src/modules/user/__test__/register.test.ts:38:58)
      source: "\r
      
        \      t.teardown(() => {\r
      
        \        fastify.close()\r
      
        ------^
      
        \        createUserStub.restore()\r
      
        \        sendToQueueStub.restore()\n"
      diff: |
        --- expected
        +++ actual
        @@ -1,1 +1,1 @@
        -201
        +400
      ...
    
    not ok 2 - should be equivalent
      ---
      diff: |
        --- expected
        +++ actual
        @@ -1,10 +1,5 @@
         Object {
        -  "message": "User registered successfully",
        -  "data": Object {
        -    "firstName": "Ellie",
        -    "lastName": "O'Conner",
        -    "email": "Andy_Oberbrunner@yahoo.com",
        -    "username": "Herta_Barrows",
        -    "id": 958,
        -  },
        +  "statusCode": 400,
        +  "error": "Bad Request",
        +  "message": "body must have required property 'first_name'",
         }
      at:
        fileName: src\modules\user\__test__\register.test.ts
        lineNumber: 89
        columnNumber: 7
        isToplevel: true
        generated:
          fileName: src/modules/user/__test__/register.test.ts
          lineNumber: 107
          columnNumber: 7
      stack: |
        src/modules/user/__test__/register.test.ts:89:7
        Generator.next
        fulfilled (src/modules/user/__test__/register.test.ts:38:58)
      source: "      t.teardown(() => {\r
      
        \        fastify.close()\r
      
        \        createUserStub.restore()\r
      
        ------^
      
        \        sendToQueueStub.restore()\r
      
        \      })\n"
      ...
    
    1..2
not ok 1 - ✅ Should register a user successfully # time=2314.04ms
  ---
  at:
    fileName: src\modules\user\__test__\register.test.ts
    lineNumber: 70
    columnNumber: 16
    typeName: Object
    generated:
      fileName: src/modules/user/__test__/register.test.ts
      lineNumber: 88
      columnNumber: 16
  source: "\r
  
    \      const response = await fastify.inject({\r
  
    \        method: \"POST\",\r
  
    ---------------^
  
    \        url,\r
  
    \        payload: {\n"
  ...

# Subtest: ❌ Should return error when required fields are missing
    ok 1 - should be equal
    not ok 2 - should be equivalent
      ---
      diff: |
        --- expected
        +++ actual
        @@ -1,3 +1,5 @@
         Object {
        -  "message": "",
        +  "statusCode": 400,
        +  "error": "Bad Request",
        +  "message": "body must have required property 'first_name'",
         }
      at:
        fileName: src\modules\user\__test__\register.test.ts
        lineNumber: 115
        columnNumber: 7
        isToplevel: true
        generated:
          fileName: src/modules/user/__test__/register.test.ts
          lineNumber: 133
          columnNumber: 7
      stack: |
        src/modules/user/__test__/register.test.ts:115:7
        Generator.next
        fulfilled (src/modules/user/__test__/register.test.ts:38:58)
      source: "        fastify.close()\r
      
        \        createUserStub.restore()\r
      
        \        sendToQueueStub.restore()\r
      
        ------^
      
        \      })\n"
      ...
    
    1..2
not ok 2 - ❌ Should return error when required fields are missing # time=1341.286ms
  ---
  at:
    fileName: src\modules\user\__test__\register.test.ts
    lineNumber: 97
    columnNumber: 16
    typeName: Object
    generated:
      fileName: src/modules/user/__test__/register.test.ts
      lineNumber: 115
      columnNumber: 16
  source: "        url,\r
  
    \        payload: {\r
  
    \          email: \"invalid-email\",\r
  
    ---------------^
  
    \          password,\r
  
    \          passwordConfirmation,\n"
  ...

