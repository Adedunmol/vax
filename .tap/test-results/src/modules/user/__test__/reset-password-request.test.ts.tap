Initializing Redis Client...
TAP version 14
connected to redis
# Subtest: ✅ Should send a reset password OTP successfully
    not ok 1 - should be equal
      ---
      compare: ===
      at:
        fileName: src\modules\user\__test__\reset-password-request.test.ts
        lineNumber: 80
        columnNumber: 7
        isToplevel: true
        generated:
          fileName: src/modules/user/__test__/reset-password-request.test.ts
          lineNumber: 98
          columnNumber: 7
      stack: |
        src/modules/user/__test__/reset-password-request.test.ts:80:7
        Generator.next
        fulfilled (src/modules/user/__test__/reset-password-request.test.ts:38:58)
      source: "    payload: { email },\r
      
        \  });\r
      
        \r
      
        \  t.equal(response.statusCode, 400);\r
      
        \  t.same(response.json(), { message: \"Email hasn't been verified yet. Check
        your inbox.\" });\n"
      diff: |
        --- expected
        +++ actual
        @@ -1,1 +1,1 @@
        -200
        +404
      ...
    
    not ok 2 - should be equivalent
      ---
      diff: |
        --- expected
        +++ actual
        @@ -1,9 +1,5 @@
         Object {
        -  "message": "otp has been sent to the provided email",
        -  "status": "success",
        -  "data": Object {
        -    "userId": 775,
        -    "email": "Savanah.Pouros46@hotmail.com",
        -    "otp": "1234",
        -  },
        +  "message": "Route POST:/api/v1/auth/reset-password-request not found",
        +  "error": "Not Found",
        +  "statusCode": 404,
         }
      at:
        fileName: src\modules\user\__test__\reset-password-request.test.ts
        lineNumber: 81
        columnNumber: 7
        isToplevel: true
        generated:
          fileName: src/modules/user/__test__/reset-password-request.test.ts
          lineNumber: 99
          columnNumber: 7
      stack: |
        src/modules/user/__test__/reset-password-request.test.ts:81:7
        Generator.next
        fulfilled (src/modules/user/__test__/reset-password-request.test.ts:38:58)
      source: "  });\r
      
        \r
      
        \  t.equal(response.statusCode, 400);\r
      
        ------^
      
        \  t.same(response.json(), { message: \"Email hasn't been verified yet. Check
        your inbox.\" });\r
      
        });\n"
      ...
    
    1..2
not ok 1 - ✅ Should send a reset password OTP successfully # time=2426.319ms
  ---
  at:
    fileName: src\modules\user\__test__\reset-password-request.test.ts
    lineNumber: 66
    columnNumber: 16
    typeName: Object
    generated:
      fileName: src/modules/user/__test__/reset-password-request.test.ts
      lineNumber: 84
      columnNumber: 16
  source: "});\r
  
    \r
  
    test(\"❌ Should return 400 if email is not verified\", async (t) => {\r
  
    ---------------^
  
    \  findByEmailStub.returns({ id: userId, email, verified: false });\r
  
    \  const fastify = build();\n"
  ...

# Subtest: ❌ Should return 404 if user is not found
    ok 1 - should be equal
    not ok 2 - should be equivalent
      ---
      diff: |
        --- expected
        +++ actual
        @@ -1,3 +1,5 @@
         Object {
        -  "message": "No user found with this email",
        +  "message": "Route POST:/api/v1/auth/reset-password-request not found",
        +  "error": "Not Found",
        +  "statusCode": 404,
         }
      at:
        fileName: src\modules\user\__test__\reset-password-request.test.ts
        lineNumber: 100
        columnNumber: 7
        isToplevel: true
        generated:
          fileName: src/modules/user/__test__/reset-password-request.test.ts
          lineNumber: 118
          columnNumber: 7
      stack: |
        src/modules/user/__test__/reset-password-request.test.ts:100:7
        Generator.next
        fulfilled (src/modules/user/__test__/reset-password-request.test.ts:38:58)
      ...
    
    1..2
not ok 2 - ❌ Should return 404 if user is not found # time=1381.227ms
  ---
  at:
    fileName: src\modules\user\__test__\reset-password-request.test.ts
    lineNumber: 87
    columnNumber: 16
    typeName: Object
    generated:
      fileName: src/modules/user/__test__/reset-password-request.test.ts
      lineNumber: 105
      columnNumber: 16
  ...

